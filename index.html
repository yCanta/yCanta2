<!DOCTYPE html5>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <script src="https://code.jquery.com/jquery-3.4.0.min.js" integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg="crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/pouchdb@7.0.0/dist/pouchdb.min.js">
    </script>
    <script src="db.js" type="text/javascript"></script>
    <script src="jquery.toTextarea.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="2html.css">
    <title>yCanta2: TodosCantas > All Creatures of Our God and King</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body class="songbookList">
    <header>
      <h2>yCanta2!</h2>
      <div class="navigation"><a href="#">Reset</a>
      </div>
    </header>
    <main class="container">
      <div class="column" id="songbookList">
        <div style="width: 300px;" >
          <h3>Songbooks &#x1F50D;</h3>
          <ul>
            <a href="#sb-aSongbook.xml"><li class="selected">todosCantas</li></a>
            <li>Black Book<a href="#" class="icon-fl-right">★</a></li>
            <li>  4/21/19 - Easter<a href="#" class="icon-fl-right">★</a>  </li>
            <hr>
<li>  ABIDE Songbook  </li>
<li>  Africa Worship  </li>
<li>  America Worship </li>
<li>  Arkansas River Trip </li>
<li>  Baby Dedication 12/15/17  </li>
<li>  Black Book  </li>
<li>  CA Song Book Wk 1 </li>
<li>  CA Song Book Wk 2 </li>
<li>  Campfire  </li>
<li>  Canaan Nominations  </li>
<li>  Canaan Worship: Noah  </li>
<li>  Carl's  </li>
<li>  Chandigarh Worship  </li>
<li>  Children's Songs Pamphlet </li>
<li>  Christmas11 </li>
<li>  Clermont Park Worship </li>
<li>  Coxsackie Chapel 20180729 </li>
<li>  Coxsackie Christmas Festival  </li>
<li>  Coxsackie Kairos #23  </li>
<li>  Coxsackie Kairos #29  </li>
<li>  Coxsackie28Spanish  </li>
<li>  Coxsackie_mass  </li>
<li>  David's Worship Songbook  </li>
<li>  DC Community Group  </li>
<li>  DC Worship  </li>
<li>  DC Worship 2  </li>
<li>  Debrief </li>
<li>  Espanol Canciones </li>
<li>  Fairborn songs  </li>
<li>  Friday Night Worship SAFB </li>
<li>  graveside </li>
<li>  Greene Kairos #3  </li>
<li>  Greene Kairos #4  </li>
<li>  Greene2Day2014  </li>
<li>  GreeneSatJuly26 </li>
<li>  Guys Night Mini </li>
<li>  Hempel/Anderson Wedding </li>
<li>  HempelHepworthWedding </li>
<li>  HempelHorstWedding  </li>
<li>  HempelLoseeWedding  </li>
<li>  HerricksChoices </li>
<li>  Himalaya Worship  </li>
<li>  Home Group 12/3 </li>
<li>  Ida Hempel funeral  </li>
<li>  India Worship </li>
<li>  JoannaCaseyWedding  </li>
</ul>
        </div>
      </div>
      <div class="column" id="songList">
        <div class="subcolumn">
          <div style="width:400px;" id="songbook_content">
            <h3>todosCantas <a href="#sb-aSongbook.xml&edit" class="edit-icon">&#9998;</a></h3>
          </div>
        </div>
        <div class="subcolumn" id="edit">
          <div>
            <h3>Add a song?<a href="#sb-aSongbook.xml" class="icon-fl-right close-icon">x</a></h3>
            <ul>
              <li>This little light of mine!</li>
              <li>All Hail the Power</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="column" id="song">
        <div class="subcolumn">
          <div class="content">
<song format-version="0.1" ><stitle>This Little Light Of Mine</stitle><author>author unknown</author><key>C</key><categories>Aspiration/Desire, Commitment, Dedication/Devotion, Evangelism</categories><chunk type="verse"><line><c>C</c>This little light of mine,</line><line>I'm gonna let it shine!</line><line><c>F</c>This little light of mine,</line><line>I'm gonna let it <c>C</c>shine,</line><line>Let it shine, let it <c>G</c>shine, </line><line>Let it <c>C</c>shine.</line></chunk><chunk type="verse"><line><c>C</c>Hide it under a bushel, no!</line><line>I'm gonna let it shine!</line><line><c>F</c>Hide it under a bushel, no!</line><line>I'm gonna let it <c>C</c>shine,</line><line>Let it shine, let it <c>G</c>shine, </line><line>Let it <c>C</c>shine.</line></chunk><chunk type="verse"><line><c>C</c>Won't let Satan blow it out!</line><line>I'm gonna let it shine!</line><line><c>F</c>Won't let Satan blow it out!</line><line>I'm gonna let it <c>C</c>shine,</line><line>Let it shine, let it <c>G</c>shine, </line><line>Let it <c>C</c>shine.</line></chunk><chunk type="verse"><line><c>C</c>Let it shine all over the world!</line><line>I'm gonna let it shine!</line><line><c>F</c>Let it shine all over the world!</line><line>I'm gonna let it <c>C</c>shine,</line><line>Let it shine, let it <c>G</c>shine, </line><line>Let it <c>C</c>shine.</line></chunk><chunk type="verse"><line><c>C</c>Let it shine 'till Jesus comes!</line><line>I'm gonna let it shine!</line><line><c>F</c>Let it shine 'till Jesus comes!</line><line>I'm gonna let it <c>C</c>shine,</line><line>Let it shine, let it <c>G</c>shine, </line><line>Let it <c>C</c>shine.</line></chunk><copyright>Public Domain</copyright></song>
          </div>
        </div>
        <div class="subcolumn" id="edit">
          <div>
            <h3>Add a song Category?<a href="#sb-aSongbook.xml/&s-aSong.song" class="icon-fl-right close-icon">x</a></h3>
            <ul>
              <li>God</li>
              <li>Holy Spirit</li>
              <li>Christ's Return</li>
            </ul>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <span style="float: right;">rev __________ 1</span>    
    </footer>
    <script>
      $('.column').click(function(){
        if(($(this).height() <= 200) || ($(this).width() <= 200)) {
          $('body').attr('class',$(this).attr('id'));
        }
      });
      $(function () {
        editSong = function () {
          var elm = 
          $('#song').first('.subcolumn').find('.content').children().attr('contenteditable', 'true').toTextarea({
            allowHTML: false,//allow HTML formatting with CTRL+b, CTRL+i, etc.
            allowImg: false,//allow drag and drop images
            singleLine: false,//make a single line so it will only expand horizontally
            pastePlainText: true,//paste text without styling as source
            placeholder: false//a placeholder when no text is entered. This can also be set by a placeholder="..." or data-placeholder="..." attribute
          });
        }
        closeEdit = function () {
          $('#song').first('.column').find('.content').children().attr('contenteditable', 'false');
          saveSong();
        }

        // URL navigation implementing
        window.addEventListener("hashchange", hashchanged, false);

        // Trigger the event (useful on page load).
        hashchanged();


        //fun little function for counting syllables.  Need to create breaks in the line instead... if we were to use this for Chord positioning.
        var count = function(word) {
          word = word.toLowerCase(); 
          word = word.replace(/(?:[^laeiouy]|ed|[^laeiouy]e)$/, ''); 
          word = word.replace(/^y/, ''); 
          //return word.match(/[aeiouy]{1,2}/g).length; 
          var syl = word.match(/[aeiouy]{1,2}/g);
          console.log(syl);
          if(syl) {
            //console.log(syl);
            return syl.length;
          }
        }
        saveSong();
        //alert(count('yolo'));
      });   
      function hashchanged(){
        var hash = location.hash;
        //alert(hash);
        //if blank - should have to do nothing
        if(hash == ''){
         $('body').attr('class','songbookList');
        }
        //if song edit
        else if((hash.search('&s-') != -1) && (hash.search('&edit') != -1)) {
          //check if songbook is loaded
          //Initiate song edit
          $('body').attr('class', 'song edit');
          editSong();
        }
        //if song
        else if(hash.search('&s-') != -1) {
          closeEdit();
          loadSongbook();
          $('body').attr('class','song');
          //check if songbook is loaded
          //load song
        }
        //if songbook edit
        else if((hash.search('#sb-') != -1) && (hash.search('&edit') != -1)) {
          //Initiate songbook edit
          $('body').attr('class', 'songList edit');
        }
        //if songbook
        else if(hash.search('#sb-') != -1) {
          //load songbook
          loadSongbook();
        }
      }
    </script>
  </body>
</html>
